#!/usr/bin/tclsh

set cannonical [read stdin]

# Try 1: FogBugz
set fogBugzPattern {URL:\s+([^\s]+fogbugz[^\s]+)}
regexp -nocase $fogBugzPattern $cannonical _ url

if {[info exists url]} {
	exec open $url
	return
}

# Try 2: Github pull request
set githubPattern {https://github[^\s]+/pull/[^\s]+}
regexp -nocase $githubPattern $cannonical url

if {[info exists url]} {
	exec open $url
}
